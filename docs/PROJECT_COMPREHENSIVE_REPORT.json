{
  "metadata": {
    "project_name": "CommandCenter",
    "description": "Multi-project R&D management and knowledge base system with AI-driven agent orchestration",
    "generated_at": "2025-11-21",
    "git_branch": "main",
    "latest_commit": "a98302c",
    "status": "PRODUCTION-READY (Phase 10 Phase 6 Complete)",
    "license": "MIT",
    "primary_language": "Python/TypeScript"
  },

  "executive_summary": {
    "vision": "Personal AI Operating System for Knowledge Work - An intelligent layer between users and all their tools with active intelligence that learns patterns and unifies ecosystems (GitHub, Notion, Slack, Obsidian, Zotero, Linear, ArXiv, YouTube, Browser) with privacy-first architecture",
    "current_state": "Production-ready agent orchestration system with 5 operational agents, comprehensive observability, security audit complete, and load testing infrastructure in place",
    "infrastructure_completeness": "92%",
    "test_coverage": "1,700+ tests passing",
    "code_quality": {
      "eslint_errors": 0,
      "eslint_warnings": 6,
      "backend_tests": "1,676 passing",
      "frontend_tests": "12/12 passing (100%)",
      "pre_commit_hooks": "All passing (black, isort, flake8, mypy)"
    }
  },

  "architecture": {
    "approach": "Hybrid Modular Monolith with NATS event bus",
    "core_stack": {
      "backend": "Python 3.11 + FastAPI + SQLAlchemy",
      "frontend": "React 18 + TypeScript + Vite",
      "database": "PostgreSQL 16 + pgvector",
      "cache": "Redis",
      "message_bus": "NATS with JetStream",
      "orchestration": "Dagger SDK (Python) + TypeScript service",
      "monitoring": "Prometheus + Grafana",
      "task_queue": "Celery",
      "tracing": "OpenTelemetry + Tempo",
      "logging": "Winston + Loki"
    },
    "service_architecture": {
      "pattern": "Routers → Services → Models → Schemas",
      "layers": [
        "routers/ - FastAPI endpoints (HTTP interface)",
        "services/ - Business logic (GitHubService, RAGService, EventService)",
        "models/ - SQLAlchemy ORM (database tables)",
        "schemas/ - Pydantic models (request/response validation)"
      ]
    },
    "key_design_principles": [
      "Data isolation: Each project requires its own isolated CommandCenter instance",
      "Privacy-first: Local embeddings, self-hosted infrastructure",
      "Type-safe orchestration: Dagger SDK for container management",
      "Event-driven: Real-time event correlation and query capabilities",
      "Observable: Comprehensive monitoring, tracing, and alerting"
    ]
  },

  "project_structure": {
    "root_directories": {
      "backend/": "FastAPI backend service with RAG, GitHub integration, event system",
      "frontend/": "React frontend for project management UI",
      "hub/": "Multi-project orchestration system",
      "hub/orchestration/": "TypeScript/Dagger-based agent orchestration service (ACTIVE DEVELOPMENT)",
      "hub/backend/": "Python/FastAPI Hub backend (multi-instance management)",
      "hub/frontend/": "React Hub frontend",
      "docs/": "Project documentation, roadmaps, planning",
      "libs/knowledgebeast/": "Vendored RAG backend engine",
      "federation/": "Federation infrastructure for multi-hub communication",
      ".worktrees/": "Git worktrees for parallel feature development"
    },
    "configuration_files": {
      ".env": "Environment configuration (REQUIRED: unique per project instance)",
      "docker-compose.yml": "Main service orchestration",
      "docker-compose.prod.yml": "Production configuration",
      "Makefile": "Development commands and workflows",
      "hub/orchestration/prisma/schema.prisma": "Agent orchestration database schema"
    }
  },

  "core_services": {
    "github_service": {
      "location": "backend/app/services/github_service.py",
      "purpose": "PyGithub wrapper for GitHub API integration",
      "features": [
        "Repository authentication and syncing",
        "Commit tracking",
        "Per-repository access tokens (encrypted)",
        "User repository listing"
      ],
      "key_methods": ["sync_repository()", "list_user_repos()", "get_repository_info()"]
    },
    "rag_service": {
      "location": "backend/app/services/rag_service.py",
      "purpose": "Knowledge base with vector search using KnowledgeBeast",
      "backend": "PostgreSQL + pgvector",
      "embeddings": "HuggingFace sentence-transformers (local, no API costs)",
      "search_type": "Hybrid: Vector similarity + keyword search with Reciprocal Rank Fusion",
      "features": [
        "Multi-tenant with collection prefixes (project_{id})",
        "Document processing via Docling",
        "Local embeddings for privacy"
      ],
      "dependencies": ["knowledgebeast", "sentence-transformers", "psycopg2-binary", "asyncpg", "docling>=2.5.5"],
      "requirements": "PostgreSQL with pgvector extension"
    },
    "event_service": {
      "location": "backend/app/services/event_service.py",
      "purpose": "NATS-based event streaming and correlation",
      "features": [
        "Event publish/subscribe/replay",
        "Correlation ID tracking across requests",
        "Temporal replay API",
        "Server-Sent Events (SSE) streaming",
        "PostgreSQL persistence"
      ],
      "status": "COMPLETE (Phase 1-3)"
    },
    "agent_orchestration": {
      "location": "hub/orchestration/",
      "technology": "TypeScript + Dagger + Prisma + Express",
      "purpose": "Execute multi-agent workflows with DAG-based orchestration",
      "agents": [
        {
          "name": "security-scanner",
          "type": "RULE",
          "risk_level": "AUTO",
          "capabilities": ["scan-repository"],
          "purpose": "Scan code for security vulnerabilities"
        },
        {
          "name": "notifier",
          "type": "API",
          "risk_level": "AUTO",
          "capabilities": ["send-notification"],
          "purpose": "Send notifications via various channels"
        },
        {
          "name": "compliance-checker",
          "type": "RULE",
          "risk_level": "AUTO",
          "capabilities": ["check-compliance"],
          "purpose": "License scanning, security headers, secret detection",
          "features": ["OSS validation", "dependency licenses", "CSP headers", "hardcoded secrets"]
        },
        {
          "name": "patcher",
          "type": "SCRIPT",
          "risk_level": "APPROVAL_REQUIRED",
          "capabilities": ["apply-patch"],
          "purpose": "Dependency updates, security patches, refactoring",
          "safety_features": ["dry-run mode", "rollback scripts", "diff generation"]
        },
        {
          "name": "code-reviewer",
          "type": "RULE",
          "risk_level": "AUTO",
          "capabilities": ["review-code"],
          "purpose": "Quality, security, performance checks",
          "checks": ["cyclomatic complexity", "eval() usage", "SQL injection patterns", "nested loops"]
        }
      ],
      "workflow_features": [
        "DAG-based execution",
        "Template resolution ({{nodeId.output.field}})",
        "Approval workflows for high-risk operations",
        "Dagger container isolation",
        "OpenTelemetry tracing",
        "Circuit breaker pattern",
        "Rate limiting (100 req/min)"
      ],
      "database_schema": {
        "agents": "Agent registry with capabilities",
        "workflows": "Workflow definitions with DAG nodes",
        "agent_runs": "Individual agent execution history",
        "workflow_runs": "Workflow execution history",
        "workflow_approvals": "Human-in-the-loop approval tracking"
      },
      "production_readiness": {
        "status": "PRODUCTION-READY ✅",
        "phase_completed": "Phase 6 (100%)",
        "completion_date": "2025-11-20",
        "features_delivered": [
          "5 operational agents",
          "Load testing infrastructure (k6 scenarios)",
          "Security audit (0 critical issues)",
          "Comprehensive documentation (3,100+ lines)",
          "Production hardening (rate limiting + circuit breaker)",
          "Smoke tests (1/5 complete)"
        ],
        "next_steps": [
          "Complete smoke tests 2-5",
          "Production deployment prep",
          "Dagger Engine health check automation"
        ]
      }
    }
  },

  "database_models": {
    "core_entities": [
      {
        "name": "Repository",
        "location": "backend/app/models/",
        "purpose": "GitHub repo tracking",
        "fields": ["owner", "name", "access_token", "last_commit_sha"]
      },
      {
        "name": "Technology",
        "location": "backend/app/models/",
        "purpose": "Tech radar entries",
        "fields": ["domain", "title", "vendor", "status", "relevance"]
      },
      {
        "name": "ResearchTask",
        "location": "backend/app/models/",
        "purpose": "Research item management",
        "fields": ["title", "description", "status", "priority"],
        "relationships": ["links to repos", "links to technologies"]
      },
      {
        "name": "KnowledgeEntry",
        "location": "backend/app/models/",
        "purpose": "RAG document metadata",
        "fields": ["source", "category", "embedding_id"]
      },
      {
        "name": "Event",
        "location": "backend/app/models/",
        "purpose": "Event streaming persistence",
        "fields": ["subject", "origin", "correlation_id", "payload", "timestamp"]
      }
    ],
    "orchestration_entities": [
      {
        "name": "Agent",
        "location": "hub/orchestration/prisma/schema.prisma",
        "purpose": "Agent registry",
        "fields": ["name", "type", "riskLevel", "entryPath", "version"],
        "relationships": ["capabilities", "runs", "workflowNodes"]
      },
      {
        "name": "Workflow",
        "location": "hub/orchestration/prisma/schema.prisma",
        "purpose": "Workflow definitions",
        "fields": ["name", "description", "trigger", "status"],
        "relationships": ["nodes", "runs"]
      },
      {
        "name": "WorkflowRun",
        "location": "hub/orchestration/prisma/schema.prisma",
        "purpose": "Workflow execution tracking",
        "fields": ["status", "startedAt", "finishedAt"],
        "relationships": ["agentRuns", "approvals"]
      }
    ]
  },

  "roadmap_and_phases": {
    "comprehensive_plan": {
      "document": "docs/plans/2025-11-03-commandcenter-phases-1-12-comprehensive-roadmap.md",
      "timeline": "32 weeks (8 months)",
      "architecture": "Hybrid Modular Monolith",
      "vision": "Transform CommandCenter into a self-healing, AI-driven mesh with federated instances, real-time visualization, agent orchestration, and predictive intelligence"
    },
    "completed_phases": [
      {
        "name": "Phase A: Dagger Production Hardening",
        "pr": "#74",
        "status": "PRODUCTION-READY",
        "features": [
          "Port forwarding",
          "Service persistence",
          "Build process fixes",
          "40 total tests (27 unit + 6 integration + 7 API validation)",
          "Zero-mock validation with real Dagger containers"
        ]
      },
      {
        "name": "Phase B: Automated Knowledge Ingestion",
        "pr": "#63",
        "status": "MERGED",
        "features": [
          "RSS feeds",
          "Documentation ingestion",
          "Webhooks",
          "File watchers",
          "Source management",
          "50+ new tests"
        ]
      },
      {
        "name": "Phase C: Observability Layer",
        "pr": "#73",
        "status": "PRODUCTION",
        "features": [
          "Correlation middleware",
          "postgres-exporter",
          "5 Grafana dashboards",
          "5 AlertManager rules",
          "17 integration tests",
          "Database migration for monitoring"
        ]
      },
      {
        "name": "Phase 1: Event System Bootstrap",
        "date": "2025-11-03",
        "status": "COMPLETE",
        "features": [
          "NATS 2.10 with JetStream integration",
          "EventService with publish/subscribe/replay",
          "HTTP and WebSocket API endpoints",
          "PostgreSQL persistence",
          "40+ tests passing"
        ]
      },
      {
        "name": "Phase 2-3: Event Streaming & Correlation",
        "date": "2025-11-04",
        "status": "COMPLETE",
        "features": [
          "Correlation middleware for request tracing",
          "Server-Sent Events (SSE) streaming",
          "CLI tools (query, follow commands)",
          "Natural language time parsing",
          "17 tests passing"
        ]
      },
      {
        "name": "Phase 10 Phase 6: Production Readiness",
        "date": "2025-11-20",
        "status": "COMPLETE (100%)",
        "features": [
          "3 new agents (compliance-checker, patcher, code-reviewer)",
          "Load testing infrastructure (k6)",
          "Security audit (0 critical issues)",
          "Comprehensive documentation (3,100+ lines: AGENT_DEVELOPMENT.md, WORKFLOW_GUIDE.md, RUNBOOKS.md)",
          "Production hardening (rate limiting, circuit breaker)",
          "26 files, +7,750 lines"
        ],
        "success_criteria_met": [
          "Functional: 5 agents operational, workflows tested ✅",
          "Performance: Load tests created, baselines documented ✅",
          "Observability: Phase 5 infrastructure operational ✅",
          "Security: 0 critical issues, audit complete ✅",
          "Documentation: 3 comprehensive guides ✅",
          "Hardening: Rate limiting + circuit breaker active ✅"
        ]
      }
    ],
    "upcoming_phases": [
      {
        "name": "Phase 4: NATS Bridge",
        "timeline": "Week 4",
        "deliverables": [
          "Bidirectional NATS bridge",
          "Subject namespace design",
          "JSON-RPC endpoint for external tools",
          "Event routing rules"
        ]
      },
      {
        "name": "Phase 5: Federation Prep",
        "timeline": "Week 5",
        "deliverables": [
          "Hub registry metadata model",
          "Presence heartbeat publisher",
          "Hub discovery subscriber",
          "Metrics publishing"
        ]
      },
      {
        "name": "Phase 6: Health & Service Discovery",
        "timeline": "Weeks 6-8",
        "deliverables": [
          "Health check framework",
          "Service discovery mechanism",
          "Distributed health monitoring"
        ]
      },
      {
        "name": "Phase 7-8: Graph Service & VISLZR",
        "timeline": "Weeks 9-16",
        "blueprint": "hub-prototype/phase_7_8_graph_service_vislzr_integration_plan_command_center.md",
        "deliverables": [
          "Graph-Service implementation",
          "VISLZR frontend visualization",
          "Interactive code exploration"
        ]
      },
      {
        "name": "Phase 9: Federation & Ecosystem Mode",
        "timeline": "Weeks 17-20",
        "blueprint": "hub-prototype/phase_9_federation_ecosystem_mode_implementation_blueprint.md",
        "deliverables": [
          "Multi-hub federation",
          "Cross-project intelligence",
          "Ecosystem-wide visibility"
        ]
      },
      {
        "name": "Phase 10: Agent Orchestration & Workflows",
        "timeline": "Weeks 21-24",
        "blueprint": "hub-prototype/phase_10_agent_orchestration_workflow_automation_blueprint.md",
        "note": "Phase 6 (Production Readiness) COMPLETE ✅",
        "remaining": "Phases 7-12 for advanced automation"
      },
      {
        "name": "Phase 11: Compliance & Security",
        "timeline": "Weeks 25-27",
        "blueprint": "hub-prototype/phase_11_compliance_security_partner_interfaces_blueprint.md",
        "deliverables": [
          "Compliance automation",
          "Security monitoring",
          "Partner API interfaces"
        ]
      },
      {
        "name": "Phase 12: Autonomous Mesh & Predictive Intelligence",
        "timeline": "Weeks 28-32",
        "blueprint": "hub-prototype/phase_12_autonomous_mesh_predictive_intelligence_blueprint.md",
        "deliverables": [
          "Self-healing systems",
          "Predictive failure detection",
          "Auto-remediation",
          "Mesh intelligence"
        ]
      }
    ]
  },

  "git_worktrees": {
    "description": "Parallel feature development using git worktrees for isolation",
    "worktrees": [
      {
        "path": ".worktrees/hub-background-tasks",
        "branch": "feature/hub-background-tasks",
        "commit": "7a561b5",
        "purpose": "Hub background task implementation"
      },
      {
        "path": ".worktrees/knowledgebeast-migration",
        "branch": "feature/knowledgebeast-migration",
        "commit": "5ce10cd",
        "purpose": "KnowledgeBeast integration and migration"
      },
      {
        "path": ".worktrees/phase-1-12-roadmap",
        "branch": "feature/phase-1-12-roadmap",
        "commit": "3746596",
        "purpose": "Comprehensive roadmap planning"
      },
      {
        "path": ".worktrees/phase-10-agent-orchestration",
        "branch": "feature/phase-10-agent-orchestration",
        "commit": "c0186c8",
        "purpose": "Agent orchestration system development"
      },
      {
        "path": ".worktrees/phase-2-3-event-streaming",
        "branch": "feature/phase-2-3-event-streaming",
        "commit": "52f69a6",
        "purpose": "Event streaming and correlation"
      },
      {
        "path": ".worktrees/phase-5-federation",
        "branch": "feature/phase-5-federation",
        "commit": "cbd6b3a",
        "purpose": "Federation preparation"
      },
      {
        "path": ".worktrees/phase-7-graph-service",
        "branch": "feature/phase-7-graph-service",
        "commit": "a6636e9",
        "purpose": "Graph service implementation"
      },
      {
        "path": ".worktrees/phase-9-federation",
        "branch": "phase-9-federation",
        "commit": "e0385a2",
        "purpose": "Federation and ecosystem mode"
      },
      {
        "path": ".worktrees/phase-a-dagger-hardening",
        "branch": "feature/phase-a-dagger-hardening",
        "commit": "674a1e6",
        "purpose": "Dagger production hardening"
      },
      {
        "path": ".worktrees/phase-c-observability",
        "branch": "feature/phase-c-observability",
        "commit": "7c53403",
        "purpose": "Observability layer implementation"
      },
      {
        "path": ".worktrees/production-foundations",
        "branch": "feature/production-foundations",
        "commit": "4823f2a",
        "purpose": "Production infrastructure foundations"
      },
      {
        "path": ".worktrees/testing-docker-func",
        "branch": "testing/week2-docker-functionality",
        "commit": "fb345cf",
        "purpose": "Docker functionality testing"
      },
      {
        "path": ".worktrees/testing-docker-infra",
        "branch": "testing/week2-docker-infra",
        "commit": "2dbe672",
        "purpose": "Docker infrastructure testing"
      },
      {
        "path": ".worktrees/testing-hub-security",
        "branch": "testing/week2-hub-security",
        "commit": "bd48a11",
        "purpose": "Hub security testing"
      },
      {
        "path": ".worktrees/testing-performance",
        "branch": "testing/week2-performance",
        "commit": "464c34c",
        "purpose": "Performance testing"
      },
      {
        "path": ".worktrees/testing-security",
        "branch": "testing/week2-security",
        "commit": "e4da6b4",
        "purpose": "Security testing"
      },
      {
        "path": "worktree/phase-c-observability",
        "branch": "phase-c-observability",
        "commit": "906776b",
        "purpose": "Additional observability work"
      }
    ]
  },

  "api_endpoints": {
    "base_url": "http://localhost:8000",
    "documentation": "http://localhost:8000/docs (Swagger UI)",
    "key_endpoints": [
      "POST /api/v1/repositories - Add repository",
      "GET /api/v1/repositories - List repositories",
      "POST /api/v1/repositories/{id}/sync - Sync repository",
      "GET /api/v1/technologies - List technologies",
      "POST /api/v1/technologies - Create technology",
      "GET /api/v1/research - List research tasks",
      "POST /api/v1/knowledge/query - Query RAG knowledge base",
      "POST /api/events/publish - Emit event",
      "GET /api/events - Query events",
      "WS /api/events/stream - Real-time event stream"
    ],
    "orchestration_endpoints": {
      "base_url": "http://localhost:9002",
      "endpoints": [
        "POST /api/agents - Register agent",
        "GET /api/agents - List agents",
        "POST /api/workflows - Create workflow",
        "GET /api/workflows - List workflows",
        "POST /api/workflows/{id}/run - Execute workflow",
        "GET /api/workflows/runs/{id} - Get workflow run status",
        "POST /api/approvals/{id}/approve - Approve workflow step",
        "POST /api/approvals/{id}/reject - Reject workflow step"
      ]
    }
  },

  "configuration": {
    "critical_requirements": [
      "COMPOSE_PROJECT_NAME must be unique per project instance",
      "SECRET_KEY must be generated (openssl rand -hex 32)",
      "DB_PASSWORD must be strong",
      "Each project requires isolated Docker volumes",
      "PostgreSQL with pgvector extension required for RAG"
    ],
    "required_env_vars": [
      "COMPOSE_PROJECT_NAME",
      "SECRET_KEY",
      "DB_PASSWORD",
      "DATABASE_URL"
    ],
    "optional_env_vars": [
      "GITHUB_TOKEN",
      "ANTHROPIC_API_KEY",
      "OPENAI_API_KEY",
      "BACKEND_PORT (default: 8000)",
      "FRONTEND_PORT (default: 3000)",
      "POSTGRES_PORT (default: 5432)",
      "REDIS_PORT (default: 6379)",
      "NATS_URL (default: nats://localhost:4222)"
    ],
    "port_allocation": {
      "backend": 8000,
      "frontend": 3000,
      "hub_backend": 9001,
      "hub_frontend": 9000,
      "orchestration": 9002,
      "postgres": 5432,
      "redis": 6379,
      "nats": 4222,
      "nats_monitoring": 8222,
      "grafana": 3001,
      "prometheus": 9090
    }
  },

  "deployment": {
    "docker_services": [
      "backend - FastAPI application",
      "frontend - React application",
      "postgres - PostgreSQL 16 + pgvector",
      "redis - Cache and task queue",
      "nats - Message bus with JetStream",
      "celery-worker - Background task processing",
      "prometheus - Metrics collection",
      "grafana - Visualization dashboards",
      "postgres-exporter - Database metrics",
      "tempo - Distributed tracing"
    ],
    "orchestration_services": [
      "orchestration - TypeScript/Express agent execution service",
      "dagger - Container orchestration engine (external dependency)"
    ],
    "commands": {
      "setup": "make setup - Creates .env from template",
      "start": "make start - Start all services",
      "stop": "make stop - Stop all services",
      "dev": "make dev - Start with live reload",
      "logs": "make logs - View all logs",
      "health": "make health - Check service health",
      "test": "make test - Run all tests",
      "migrate": "make migrate - Apply database migrations",
      "shell_backend": "make shell-backend - Backend container bash",
      "shell_db": "make shell-db - PostgreSQL shell"
    }
  },

  "testing": {
    "test_suites": {
      "backend": {
        "framework": "pytest",
        "count": "1,676 tests",
        "command": "make test-backend",
        "structure": [
          "backend/tests/unit/ - Unit tests for services and utilities",
          "backend/tests/integration/ - Integration tests for database and APIs",
          "backend/tests/fixtures/ - Shared test fixtures"
        ]
      },
      "frontend": {
        "framework": "Vitest + React Testing Library",
        "count": "12/12 tests (100%)",
        "command": "make test-frontend",
        "location": "frontend/src/**/*.test.tsx"
      },
      "orchestration": {
        "framework": "Vitest",
        "command": "npm test",
        "location": "hub/orchestration/src/**/*.test.ts",
        "coverage": [
          "Agent registry",
          "Workflow execution",
          "Dagger integration",
          "Event bridge",
          "Circuit breaker",
          "Rate limiting"
        ]
      },
      "load_testing": {
        "framework": "k6",
        "location": "hub/orchestration/load-tests/",
        "scenarios": [
          "single-workflow.js - Single-agent performance",
          "concurrent-workflows.js - Concurrent load handling",
          "approval-latency.js - Approval workflow performance"
        ],
        "thresholds": {
          "success_rate": "99%",
          "p95_latency": "<10s",
          "approval_response": "<5s"
        }
      }
    },
    "quality_assurance": {
      "pre_commit_hooks": ["black", "isort", "flake8", "mypy"],
      "linters": {
        "python": "flake8, black, isort, mypy",
        "typescript": "ESLint + Prettier"
      },
      "code_coverage": "pytest --cov=app --cov-report=html"
    }
  },

  "security": {
    "audit_status": "COMPLETE (2025-11-20)",
    "findings": {
      "critical": 0,
      "high": 0,
      "medium": 2,
      "low": 3
    },
    "compliance": {
      "owasp_top_10": "9/10 compliant",
      "sql_injection": "Protected (Prisma ORM with parameterized queries)",
      "xss": "Protected (JSON API only, React auto-escaping)",
      "container_isolation": "Verified (Dagger sandboxing)",
      "npm_audit": "0 vulnerabilities"
    },
    "security_features": [
      "Per-repository encrypted access tokens",
      "Dagger container isolation for agents",
      "Approval workflows for high-risk operations (APPROVAL_REQUIRED risk level)",
      "Input validation (Zod schemas)",
      "Rate limiting (100 req/min per IP)",
      "Secrets never in logs or outputs",
      "Network isolation for agents"
    ],
    "recommendations": {
      "p1": [
        "Docker image format validation",
        "Agent output validation (requires DB migration)",
        "Rate limiting (IMPLEMENTED ✅)"
      ],
      "p2": [
        "Remove DATABASE_URL default",
        "Per-agent secret injection",
        "Workflow timeouts"
      ]
    }
  },

  "documentation": {
    "core_docs": [
      {
        "file": "README.md",
        "purpose": "Project overview and quick start"
      },
      {
        "file": "docs/CLAUDE.md",
        "purpose": "Complete development guide (commands, architecture, patterns)"
      },
      {
        "file": "docs/PROJECT.md",
        "purpose": "Project status and tracking"
      },
      {
        "file": "docs/ROADMAP.md",
        "purpose": "High-level roadmap"
      },
      {
        "file": "docs/CURRENT_WORK.md",
        "purpose": "Current work status (Phase 10 Phase 6 complete)"
      }
    ],
    "phase_documentation": [
      {
        "file": "docs/plans/2025-11-03-commandcenter-phases-1-12-comprehensive-roadmap.md",
        "purpose": "Full 32-week plan (2,880 lines)",
        "status": "Design Approved"
      },
      {
        "file": "hub/docs/EVENT_SYSTEM.md",
        "purpose": "Event infrastructure documentation (Phase 1-3)"
      },
      {
        "file": "docs/PHASE_A_STATUS.md",
        "purpose": "Dagger production hardening status"
      },
      {
        "file": "docs/phase-c-readiness.md",
        "purpose": "Observability layer details"
      }
    ],
    "phase_blueprints": [
      {
        "file": "hub-prototype/phase_7_8_graph_service_vislzr_integration_plan_command_center.md",
        "purpose": "Graph Service & VISLZR implementation plan"
      },
      {
        "file": "hub-prototype/phase_9_federation_ecosystem_mode_implementation_blueprint.md",
        "purpose": "Federation & Ecosystem Mode design"
      },
      {
        "file": "hub-prototype/phase_10_agent_orchestration_workflow_automation_blueprint.md",
        "purpose": "Agent Orchestration architecture"
      },
      {
        "file": "hub-prototype/phase_11_compliance_security_partner_interfaces_blueprint.md",
        "purpose": "Compliance & Security design"
      },
      {
        "file": "hub-prototype/phase_12_autonomous_mesh_predictive_intelligence_blueprint.md",
        "purpose": "Autonomous Mesh vision"
      }
    ],
    "orchestration_docs": [
      {
        "file": "hub/orchestration/docs/AGENT_DEVELOPMENT.md",
        "size": "1,400+ lines",
        "purpose": "Agent creation guide with templates and best practices"
      },
      {
        "file": "hub/orchestration/docs/WORKFLOW_GUIDE.md",
        "size": "800+ lines",
        "purpose": "Workflow creation patterns and examples"
      },
      {
        "file": "hub/orchestration/docs/RUNBOOKS.md",
        "size": "900+ lines",
        "purpose": "Common issues, debugging, recovery procedures"
      },
      {
        "file": "hub/orchestration/docs/SECURITY_AUDIT.md",
        "size": "500+ lines",
        "purpose": "Comprehensive security audit report"
      }
    ],
    "feature_docs": [
      {
        "file": "docs/CONFIGURATION.md",
        "purpose": "Environment configuration guide"
      },
      {
        "file": "docs/PORT_MANAGEMENT.md",
        "purpose": "Port conflict handling"
      },
      {
        "file": "docs/TRAEFIK_SETUP.md",
        "purpose": "Zero-conflict deployment"
      },
      {
        "file": "docs/DOCLING_SETUP.md",
        "purpose": "RAG document processing setup"
      },
      {
        "file": "docs/DAGGER_ARCHITECTURE.md",
        "purpose": "Hub orchestration architecture"
      },
      {
        "file": "docs/HUB_DESIGN.md",
        "purpose": "Hub architecture and Dagger integration"
      }
    ]
  },

  "key_technologies": {
    "backend": [
      "FastAPI 0.109.0 - Web framework",
      "SQLAlchemy 2.0.25 - ORM",
      "Alembic 1.13.1 - Database migrations",
      "Pydantic 2.5.0+ - Data validation",
      "PyGithub 2.3.0 - GitHub API client",
      "Redis 5.0.1 - Caching",
      "Celery - Task queue",
      "NATS 2.10 - Message bus",
      "KnowledgeBeast v0.1.0 - RAG engine",
      "sentence-transformers - Embeddings",
      "Docling 2.5.5+ - Document processing",
      "Prometheus-client 0.19.0 - Metrics"
    ],
    "frontend": [
      "React 18 - UI framework",
      "TypeScript 5.0+ - Type safety",
      "Vite - Build tool",
      "React Router v6 - Routing",
      "Axios - HTTP client",
      "Chart.js - Visualizations"
    ],
    "orchestration": [
      "TypeScript 5.3.2 - Language",
      "Dagger SDK 0.9.0 - Container orchestration",
      "Prisma 6.19.0 - ORM",
      "Express 4.18.2 - Web framework",
      "NATS 2.18.0 - Event bus",
      "Zod 3.22.4 - Validation",
      "Winston 3.11.0 - Logging",
      "Mustache 4.2.0 - Templating",
      "OpenTelemetry - Observability",
      "Vitest 1.0.4 - Testing"
    ],
    "infrastructure": [
      "PostgreSQL 16 - Database",
      "pgvector - Vector similarity search",
      "Redis - Cache & queue backend",
      "NATS with JetStream - Event streaming",
      "Prometheus - Metrics",
      "Grafana - Dashboards",
      "Tempo - Distributed tracing",
      "Loki - Log aggregation",
      "AlertManager - Alert routing",
      "Docker - Containerization",
      "Dagger - Orchestration SDK"
    ]
  },

  "current_issues_and_blockers": {
    "known_issues": [
      {
        "issue": "Agent registration required before smoke tests",
        "status": "RESOLVED - All 5 agents registered",
        "impact": "LOW"
      },
      {
        "issue": "Agent output validation requires DB migration",
        "status": "DEFERRED to P2",
        "impact": "MEDIUM",
        "recommendation": "DB schema change needed for output validation"
      },
      {
        "issue": "Dagger Engine must be running for orchestration",
        "status": "DOCUMENTED",
        "impact": "HIGH for orchestration service",
        "mitigation": "Add health check to deployment scripts"
      }
    ],
    "blockers": [],
    "technical_debt": [
      "Docker image format validation (P1 security recommendation)",
      "Workflow timeout implementation (P2 recommendation)",
      "Per-agent secret injection (P2 recommendation)",
      "Remove DATABASE_URL defaults (P2 security hardening)"
    ]
  },

  "observability": {
    "metrics": {
      "prometheus": {
        "url": "http://localhost:9090",
        "exporters": [
          "postgres-exporter - Database metrics",
          "prometheus-client - Application metrics",
          "OpenTelemetry SDK - Orchestration metrics"
        ],
        "custom_metrics": [
          "workflow_duration_ms",
          "workflow_success_rate",
          "agent_execution_time",
          "circuit_breaker_state",
          "rate_limit_rejections"
        ]
      }
    },
    "dashboards": {
      "grafana": {
        "url": "http://localhost:3001",
        "count": 5,
        "dashboards": [
          "System Overview",
          "Database Performance",
          "Event Streaming",
          "Workflow Execution",
          "Agent Performance"
        ]
      }
    },
    "tracing": {
      "tempo": {
        "integration": "OpenTelemetry OTLP",
        "features": [
          "Distributed tracing across services",
          "Correlation ID tracking",
          "Workflow execution traces",
          "Agent execution spans"
        ]
      }
    },
    "logging": {
      "winston": {
        "format": "JSON structured logging",
        "levels": ["error", "warn", "info", "debug"],
        "correlation": "X-Correlation-ID in all logs"
      },
      "loki": {
        "integration": "Grafana Loki",
        "features": [
          "Centralized log aggregation",
          "Log correlation with traces",
          "Searchable logs"
        ]
      }
    },
    "alerting": {
      "alertmanager": {
        "webhook": "http://localhost:9002/api/alerts/webhook",
        "rules": 5,
        "alerts": [
          "High error rate",
          "Database connection issues",
          "Circuit breaker open",
          "Workflow failures",
          "Resource exhaustion"
        ]
      }
    }
  },

  "development_workflow": {
    "git_flow": {
      "main_branch": "main",
      "feature_branches": "feature/*",
      "testing_branches": "testing/*",
      "worktree_strategy": "Git worktrees for parallel development"
    },
    "commit_conventions": {
      "format": "type(scope): description",
      "types": ["feat", "fix", "docs", "chore", "test", "refactor"],
      "examples": [
        "feat(orchestration): Add circuit breaker pattern",
        "fix(backend): Fix correlation middleware",
        "docs(roadmap): Update phase completion status"
      ]
    },
    "code_review": {
      "required": true,
      "pre_commit_hooks": ["black", "isort", "flake8", "mypy"],
      "ci_checks": ["tests", "linting", "type checking"]
    },
    "release_process": {
      "versioning": "Semantic Versioning (SemVer)",
      "current_version": "1.0.0",
      "deployment": "Docker Compose or Dagger SDK"
    }
  },

  "future_vision": {
    "target_state_phase_12": {
      "federation": "Unlimited CommandCenter instances in federated mesh",
      "visualization": "Real-time interactive VISLZR code graph exploration",
      "orchestration": "Advanced agent workflows with loops and conditionals",
      "compliance": "Continuous compliance monitoring and automation",
      "intelligence": "Predictive failure detection with auto-remediation",
      "partner_api": "External integrations for third-party tools",
      "autonomy": "Self-healing systems with minimal human intervention"
    },
    "key_capabilities": [
      "Cross-project knowledge sharing",
      "Ecosystem-wide intelligence",
      "Automated policy enforcement",
      "Intelligent root cause analysis",
      "Predictive resource scaling",
      "Multi-tenant isolation with federation",
      "Real-time collaborative visualization",
      "Plugin marketplace for agents"
    ],
    "timeline_to_full_vision": "26 weeks remaining (Phases 4-12)"
  },

  "quick_reference": {
    "important_files": [
      "README.md - Project overview",
      "docs/CLAUDE.md - Development guide",
      "docs/CURRENT_WORK.md - Current status",
      "Makefile - Development commands",
      ".env - Configuration (MUST be unique per project)",
      "docker-compose.yml - Service orchestration",
      "hub/orchestration/README.md - Agent orchestration guide",
      "hub/orchestration/prisma/schema.prisma - Orchestration database schema"
    ],
    "important_commands": [
      "make setup - Initial setup",
      "make start - Start all services",
      "make dev - Development mode with live reload",
      "make test - Run all tests",
      "make migrate - Apply database migrations",
      "make logs - View logs",
      "make health - Check service health",
      "cd hub/orchestration && npm run dev - Start orchestration service"
    ],
    "access_points": [
      "Frontend: http://localhost:3000",
      "Backend API: http://localhost:8000",
      "API Docs: http://localhost:8000/docs",
      "Hub Frontend: http://localhost:9000",
      "Hub Backend: http://localhost:9001",
      "Orchestration: http://localhost:9002",
      "Grafana: http://localhost:3001",
      "Prometheus: http://localhost:9090",
      "NATS Monitoring: http://localhost:8222"
    ]
  },

  "critical_security_notes": [
    "NEVER share CommandCenter instances across projects - each project requires isolated instance",
    "COMPOSE_PROJECT_NAME must be unique for every project",
    "Secrets (SECRET_KEY, DB_PASSWORD, GITHUB_TOKEN) must be project-specific",
    "Docker volumes are project-scoped to prevent data leakage",
    "Per-repository GitHub tokens are encrypted at rest",
    "RAG embeddings and knowledge base are project-isolated",
    "Agent execution happens in isolated Dagger containers",
    "High-risk agents (APPROVAL_REQUIRED) need human approval before execution"
  ],

  "success_metrics": {
    "phase_6_completion": {
      "functional": "5 agents operational, workflows tested ✅",
      "performance": "Load tests created, baselines documented ✅",
      "observability": "4 dashboards operational, tracing active ✅",
      "security": "0 critical issues, comprehensive audit complete ✅",
      "documentation": "3 guides totaling 3,100+ lines ✅",
      "hardening": "Rate limiting + circuit breaker active ✅"
    },
    "overall_project_health": {
      "infrastructure": "92% complete",
      "test_coverage": "1,700+ tests passing",
      "code_quality": "ESLint 0 errors, all pre-commit hooks passing",
      "production_readiness": "Agent orchestration PRODUCTION-READY ✅",
      "documentation": "Comprehensive guides and API docs ✅"
    }
  }
}
